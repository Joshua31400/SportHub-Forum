<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notifications - SPORT-HUB</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/principal.css">
    <link rel="stylesheet" href="/static/notifications.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="/static/js/isactive_nav.js" defer></script>
</head>
<body>
<div class="container">
    <header class="main-header">
        <h1>SPORT-HUB</h1>
        <nav>
            <a href="/">Forum</a>
            <a href="/profile">Profil</a>
            <a href="/liked-posts">Posts Likés</a>
            <a href="/notifications">Notifications</a>
            <a href="/login">Connexion</a>
            <a href="/logout">Déconnexion</a>
        </nav>
    </header>

    <section class="forum-header">
        <h2>Notifications</h2>
        <div class="notifications-actions">
            <form id="delete-all-form" method="post" action="/notifications">
                <input type="hidden" name="action" value="delete_all">
                <button type="submit" id="delete-all" class="new-topic-btn">
                    <i class="fas fa-trash-alt"></i> Tout supprimer
                </button>
            </form>
        </div>
    </section>

    <section class="forum-topics notifications-list">
        {{if .Notifications}}
            {{range .Notifications}}
                <div class="topic notification-item" data-id="{{.ID}}">
                    <div class="notification-icon">
                        {{if eq .Type "mention"}}
                            <i class="fas fa-at"></i>
                        {{else if eq .Type "reply"}}
                            <i class="fas fa-reply"></i>
                        {{else if eq .Type "like"}}
                            <i class="fas fa-heart"></i>
                        {{else}}
                            <i class="fas fa-bell"></i>
                        {{end}}
                    </div>
                    <div class="topic-info notification-content">
                        <p class="notification-text">{{.Message}}</p>
                        <p class="meta notification-meta">
                            <span class="notification-time"><i class="far fa-clock"></i> {{.CreatedAt.Format "02/01/2006 15:04"}}</span>
                            <a href="/post/{{.PostID.ID}}" class="notification-link">Voir le post</a>
                        </p>
                    </div>
                    <div class="topic-stats">
                        <form method="post" action="/notifications">
                            <input type="hidden" name="action" value="delete">
                            <input type="hidden" name="notification_id" value="{{.ID}}">
                            <button type="submit" class="notification-delete" title="Supprimer">
                                <i class="fas fa-trash"></i>
                            </button>
                        </form>
                    </div>
                </div>
            {{end}}
        {{else}}
            <div class="no-topics empty-notifications">
                <i class="fas fa-bell-slash fa-3x"></i>
                <p>Vous n'avez aucune notification pour le moment</p>
            </div>
        {{end}}
    </section>

    <footer>
        <p>© 2025 SPORT-HUB - Forum communautaire</p>
    </footer>
</div>
</body>
</html>